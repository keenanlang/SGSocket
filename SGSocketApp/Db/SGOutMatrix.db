record(luascript, "$(P)$(R)Name_$(INDEX)")
{
	field(PINI, "YES")
	field(AA, "$(NAME)")
	field(OUT, "$(P)$(R)OutMatrix$(INDEX)_Name PP")
	field(CODE, "return table.pack(AA:byte(1,AA:len()))")
}

record(waveform, "$(P)$(R)OutMatrix$(INDEX)_Name")
{
    field(DTYP, "asynOctetWrite")
    field(INP,  "@asyn($(PORT),$(INDEX),$(TIMEOUT=1))SG_OUT_NAMES")
    field(FTVL, "CHAR")
    field(NELM, "256")
}

record(waveform, "$(P)$(R)Init_$(INDEX)")
{
	field(INP, "$(MATRIX)")
	field(FTVL, "DOUBLE")
	field(NELM, "24")
}

record(luascript, "$(P)$(R)Copy_$(INDEX)")
{
	field(PINI, "YES")
	field(INAA, "$(P)$(R)Init_$(INDEX) PP")
	field(OUT,  "$(P)$(R)OutMatrix_$(INDEX).VAL PP")
	field(CODE, "return AA")
}

record(waveform, "$(P)$(R)OutMatrix_$(INDEX)")
{
	field(DTYP, "asynFloat64ArrayOut")
	field(INP, "@asyn($(PORT), $(INDEX), $(TIMEOUT=1))SG_OUT_MATRIX")
	field(FTVL, "DOUBLE")
	field(NELM, "24")
	field(FLNK, "$(P)$(R)OutMatrix_$(INDEX)_0")
}
